# Börslabbet Strategy Rules (Verified from börslabbet.se/borslabbets-strategier)
# Last updated: 2024-2025

strategies:

  sammansatt_momentum:
    display_name: "Sammansatt Momentum"
    description: "Highest momentum stocks filtered by Piotroski F-Score quality gate"
    category: "momentum"
    rebalance_frequency: "quarterly"  # Monthly also works, annual NOT recommended
    rebalance_months: [3, 6, 9, 12]
    position_count: 10
    weight_method: "equal"
    
    # Step 1: Calculate momentum
    metrics:
      primary:
        - name: "momentum_3m"
        - name: "momentum_6m"
        - name: "momentum_12m"
      # Momentum Score = average of 3m, 6m, 12m returns
    
    # Step 2: Quality safety filter
    quality_filters:
      - type: "piotroskis_f_score"
        action: "remove_lowest"  # Remove stocks with lowest F-Score
        # No exact cutoff published - we use bottom ~20% or F-Score <= 3
    
    # Step 3: Select top 10 by momentum

  trendande_varde:
    display_name: "Trendande Värde"
    description: "6-factor Sammansatt Värde, filtered by momentum"
    category: "value"
    rebalance_frequency: "annual"
    rebalance_month: 3  # March
    position_count: 10
    weight_method: "equal"
    
    # Step 1: Calculate Sammansatt Värde (6 metrics)
    metrics:
      primary:
        - name: "pe_ratio"
          ranking: "ascending"  # Lower = better
        - name: "pb_ratio"
          ranking: "ascending"
        - name: "ps_ratio"
          ranking: "ascending"
        - name: "p_fcf"
          ranking: "ascending"
        - name: "ev_ebitda"
          ranking: "ascending"
        - name: "dividend_yield"
          ranking: "descending"  # Higher = better
      # Value Score = average rank of all 6 metrics
    
    # Step 2: Keep top ~10% by Value Score (≈ top 40 stocks)
    filter_percentile: 10
    
    # Step 3: From filtered stocks, rank by Sammansatt Momentum
    secondary_sort: "sammansatt_momentum"
    
    # Step 4: Select top 10 by momentum

  trendande_utdelning:
    display_name: "Trendande Utdelning"
    description: "Highest dividend yield, filtered by momentum"
    category: "dividend"
    rebalance_frequency: "annual"
    rebalance_month: 3  # March
    position_count: 10
    weight_method: "equal"
    
    # Step 1: Rank by dividend yield (higher = better)
    metrics:
      primary:
        - name: "dividend_yield"
          ranking: "descending"
    
    # Step 2: Keep top ~10% by dividend yield
    filter_percentile: 10
    
    # Step 3: From filtered stocks, rank by Sammansatt Momentum
    secondary_sort: "sammansatt_momentum"
    
    # Step 4: Select top 10 by momentum

  trendande_kvalitet:
    display_name: "Trendande Kvalitet"
    description: "4-factor Sammansatt ROI (ROE+ROA+ROIC+FCFROE), filtered by momentum"
    category: "quality"
    rebalance_frequency: "annual"
    rebalance_month: 3  # March
    position_count: 10
    weight_method: "equal"
    
    # Step 1: Calculate Sammansatt ROI (4 metrics)
    metrics:
      primary:
        - name: "roe"
          ranking: "descending"  # Higher = better
        - name: "roa"
          ranking: "descending"
        - name: "roic"
          ranking: "descending"
        - name: "fcfroe"
          ranking: "descending"  # FCF/Equity - the "secret sauce"
      # Quality Score = average rank of all 4 metrics
    
    # Step 2: Keep top ~10% by Quality Score
    filter_percentile: 10
    
    # Step 3: From filtered stocks, rank by Sammansatt Momentum
    secondary_sort: "sammansatt_momentum"
    
    # Step 4: Select top 10 by momentum

# Implementation notes from börslabbet.se:
# - Universe: Top 40% of stocks by market cap (for liquidity)
# - Backtests use "topp 10%" which ≈ 10 stocks for practical portfolios
# - Trendande strategies: "topp 40% efter primära kriteriet → översta fjärdedelen efter momentum"
# - Momentum is relative ranking (subtracting index doesn't change rankings)
# - All portfolios equal-weighted, dividends reinvested
# - Piotroski cutoff not published - academic standard is F-Score >= 4-5
